{"ast":null,"code":"var _jsxFileName = \"D:\\\\236\\\\lab1\\\\Lab1_DistributedSystem\\\\frontend\\\\src\\\\features\\\\property\\\\PropertyDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport api from '../../services/api';\nimport AgentButton from '../../components/AgentButton';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction PropertyDetails() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [property, setProperty] = useState(null);\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [guests, setGuests] = useState(1);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [favoriteLoading, setFavoriteLoading] = useState(false);\n  const [bookingLoading, setBookingLoading] = useState(false);\n\n  // Fetch property details on mount\n  useEffect(() => {\n    const fetchProperty = async () => {\n      setLoading(true);\n      try {\n        const res = await api.get(`/properties/${id}`);\n        console.log('Property API response:', res.data);\n\n        // Handle different response formats\n        const propertyData = res.data.property || res.data;\n        console.log('Property data extracted:', propertyData);\n        setProperty(propertyData);\n\n        // Check if this specific property is favorited\n        checkIfFavorite();\n      } catch (err) {\n        console.error('Failed to load property details:', err);\n        alert('Failed to load property details.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProperty();\n  }, [id]);\n\n  // Check favorite status for THIS property only\n  const checkIfFavorite = async () => {\n    try {\n      const res = await api.get(`/favorites/check/${id}`);\n      setIsFavorite(res.data.isFavorite);\n    } catch (err) {\n      // Fallback: if endpoint doesn't exist, check from all favorites\n      try {\n        const res = await api.get('/traveler/favorites');\n        const favoriteIds = res.data.map(fav => fav.id);\n        setIsFavorite(favoriteIds.includes(parseInt(id)));\n      } catch (fallbackErr) {\n        console.error('Failed to check favorite status:', fallbackErr);\n      }\n    }\n  };\n\n  // Handle add/remove favorite\n  const handleToggleFavorite = async () => {\n    setFavoriteLoading(true);\n    try {\n      if (isFavorite) {\n        await api.delete(`/favorites/${id}`);\n        setIsFavorite(false);\n        alert('Removed from favorites!');\n      } else {\n        await api.post('/favorites', {\n          propertyId: id\n        });\n        setIsFavorite(true);\n        alert('Added to favorites!');\n      }\n    } catch (err) {\n      console.error('Failed to toggle favorite:', err);\n      alert('Failed to update favorites. Please try again.');\n    } finally {\n      setFavoriteLoading(false);\n    }\n  };\n\n  // Handle booking request\n  const handleBooking = async e => {\n    e.preventDefault();\n\n    // Validate dates\n    if (new Date(endDate) <= new Date(startDate)) {\n      alert('End date must be after start date.');\n      return;\n    }\n    setBookingLoading(true);\n    try {\n      await api.post('/bookings/request', {\n        propertyId: id,\n        startDate,\n        endDate,\n        guests\n      });\n      alert('Booking request submitted successfully!');\n      // Navigate to bookings page\n      navigate('/traveler/bookings');\n    } catch (err) {\n      console.error('Booking failed:', err);\n      alert('Booking failed. Please try again.');\n    } finally {\n      setBookingLoading(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mt-5\",\n      role: \"main\",\n      \"aria-busy\": \"true\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner-border\",\n          role: \"status\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"visually-hidden\",\n            children: \"Loading property...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2\",\n          children: \"Loading property...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this);\n  }\n  if (!property) {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mt-5\",\n      role: \"main\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-warning\",\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"alert-heading\",\n          children: \"Property not found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"The property you're looking for doesn't exist or has been removed.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Calculate total nights and price\n  const calculateTotal = () => {\n    if (startDate && endDate) {\n      const start = new Date(startDate);\n      const end = new Date(endDate);\n      const nights = Math.ceil((end - start) / (1000 * 60 * 60 * 24));\n      if (nights > 0) {\n        const pricePerNight = property.price || property.price_per_night;\n        return {\n          nights,\n          total: nights * pricePerNight\n        };\n      }\n    }\n    return null;\n  };\n  const totalInfo = calculateTotal();\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"container mt-5\",\n    role: \"main\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      \"aria-label\": \"breadcrumb\",\n      children: /*#__PURE__*/_jsxDEV(\"ol\", {\n        className: \"breadcrumb\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"breadcrumb-item\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/traveler/dashboard\",\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"breadcrumb-item active\",\n          \"aria-current\": \"page\",\n          children: property.name || property.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: property.imageUrl || property.image_url || 'https://via.placeholder.com/600x400?text=Property+Image',\n          alt: `${property.name || property.title} - ${property.type || 'Property'} in ${property.location || property.city || 'Location'}`,\n          className: \"img-fluid rounded shadow\",\n          style: {\n            width: '100%',\n            height: '400px',\n            objectFit: 'cover'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between align-items-start mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"h2\",\n              children: property.name || property.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-geo-alt-fill\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 17\n              }, this), \" \", property.location || property.city]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `btn ${isFavorite ? 'btn-danger' : 'btn-outline-danger'}`,\n            onClick: handleToggleFavorite,\n            disabled: favoriteLoading,\n            style: {\n              minWidth: '140px'\n            },\n            \"aria-label\": isFavorite ? 'Remove from favorites' : 'Add to favorites',\n            \"aria-pressed\": isFavorite,\n            children: favoriteLoading ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"spinner-border spinner-border-sm\",\n              role: \"status\",\n              \"aria-hidden\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this) : isFavorite ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: \"\\u2764\\uFE0F Favorited\"\n            }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: \"\\uD83E\\uDD0D Add to Favorites\"\n            }, void 0, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"lead\",\n          children: property.description || 'No description available.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"h5 card-title\",\n              children: \"Property Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"dl\", {\n              className: \"row mb-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"dt\", {\n                className: \"col-sm-4\",\n                children: \"Type:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"dd\", {\n                className: \"col-sm-8\",\n                children: property.type || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"dt\", {\n                className: \"col-sm-4\",\n                children: \"Bedrooms:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"dd\", {\n                className: \"col-sm-8\",\n                children: property.bedrooms || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"dt\", {\n                className: \"col-sm-4\",\n                children: \"Bathrooms:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"dd\", {\n                className: \"col-sm-8\",\n                children: property.bathrooms || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"dt\", {\n                className: \"col-sm-4\",\n                children: \"Max Guests:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"dd\", {\n                className: \"col-sm-8\",\n                children: property.maxGuests || property.max_guests || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this), property.amenities && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"dt\", {\n                  className: \"col-sm-4\",\n                  children: \"Amenities:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"dd\", {\n                  className: \"col-sm-8\",\n                  children: (() => {\n                    try {\n                      if (typeof property.amenities === 'string') {\n                        const parsed = JSON.parse(property.amenities);\n                        return Array.isArray(parsed) ? parsed.join(', ') : property.amenities;\n                      } else if (Array.isArray(property.amenities)) {\n                        return property.amenities.join(', ');\n                      }\n                      return 'N/A';\n                    } catch (e) {\n                      return property.amenities;\n                    }\n                  })()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"h4 text-primary mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"visually-hidden\",\n            children: \"Price:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this), \"$\", property.price || property.price_per_night || 0, \" per night\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"mt-5\",\n      \"aria-labelledby\": \"booking-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card shadow\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                id: \"booking-section\",\n                className: \"h3 card-title mb-4\",\n                children: \"Request Booking\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: handleBooking,\n                \"aria-label\": \"Property booking form\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row g-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"startDate\",\n                      className: \"form-label\",\n                      children: \"Check-in Date\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 261,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"date\",\n                      id: \"startDate\",\n                      className: \"form-control\",\n                      value: startDate,\n                      onChange: e => setStartDate(e.target.value),\n                      min: new Date().toISOString().split('T')[0],\n                      required: true,\n                      \"aria-required\": \"true\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 262,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"endDate\",\n                      className: \"form-label\",\n                      children: \"Check-out Date\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"date\",\n                      id: \"endDate\",\n                      className: \"form-control\",\n                      value: endDate,\n                      onChange: e => setEndDate(e.target.value),\n                      min: startDate || new Date().toISOString().split('T')[0],\n                      required: true,\n                      \"aria-required\": \"true\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 275,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"guests\",\n                      className: \"form-label\",\n                      children: \"Number of Guests\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 287,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      id: \"guests\",\n                      className: \"form-control\",\n                      min: \"1\",\n                      max: property.maxGuests || property.max_guests || 10,\n                      value: guests,\n                      onChange: e => setGuests(e.target.value),\n                      required: true,\n                      \"aria-required\": \"true\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 288,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 19\n                }, this), totalInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"alert alert-info mt-3\",\n                  role: \"status\",\n                  \"aria-live\": \"polite\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Price Summary:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 54\n                  }, this), \"$\", property.price || property.price_per_night, \" \\xD7 \", totalInfo.nights, \" \", totalInfo.nights === 1 ? 'night' : 'nights', \" = \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: [\"$\", totalInfo.total]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 306,\n                    columnNumber: 138\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-end mt-3\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    className: \"btn btn-success btn-lg\",\n                    disabled: bookingLoading,\n                    \"aria-busy\": bookingLoading,\n                    children: bookingLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"spinner-border spinner-border-sm me-2\",\n                        role: \"status\",\n                        \"aria-hidden\": \"true\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 319,\n                        columnNumber: 27\n                      }, this), \"Submitting...\"]\n                    }, void 0, true) : 'Submit Booking Request'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 311,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AgentButton, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 5\n  }, this);\n}\n_s(PropertyDetails, \"YbnRfvBvkaGlwYPE0rUl9jZl0dA=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = PropertyDetails;\nexport default PropertyDetails;\nvar _c;\n$RefreshReg$(_c, \"PropertyDetails\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","api","AgentButton","jsxDEV","_jsxDEV","Fragment","_Fragment","PropertyDetails","_s","id","navigate","property","setProperty","startDate","setStartDate","endDate","setEndDate","guests","setGuests","isFavorite","setIsFavorite","loading","setLoading","favoriteLoading","setFavoriteLoading","bookingLoading","setBookingLoading","fetchProperty","res","get","console","log","data","propertyData","checkIfFavorite","err","error","alert","favoriteIds","map","fav","includes","parseInt","fallbackErr","handleToggleFavorite","delete","post","propertyId","handleBooking","e","preventDefault","Date","className","role","children","fileName","_jsxFileName","lineNumber","columnNumber","calculateTotal","start","end","nights","Math","ceil","pricePerNight","price","price_per_night","total","totalInfo","href","name","title","src","imageUrl","image_url","alt","type","location","city","style","width","height","objectFit","onClick","disabled","minWidth","description","bedrooms","bathrooms","maxGuests","max_guests","amenities","parsed","JSON","parse","Array","isArray","join","onSubmit","htmlFor","value","onChange","target","min","toISOString","split","required","max","_c","$RefreshReg$"],"sources":["D:/236/lab1/Lab1_DistributedSystem/frontend/src/features/property/PropertyDetails.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport api from '../../services/api';\nimport AgentButton from '../../components/AgentButton';\n\nfunction PropertyDetails() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [property, setProperty] = useState(null);\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [guests, setGuests] = useState(1);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [favoriteLoading, setFavoriteLoading] = useState(false);\n  const [bookingLoading, setBookingLoading] = useState(false);\n\n  // Fetch property details on mount\n  useEffect(() => {\n    const fetchProperty = async () => {\n      setLoading(true);\n      try {\n        const res = await api.get(`/properties/${id}`);\n        console.log('Property API response:', res.data);\n        \n        // Handle different response formats\n        const propertyData = res.data.property || res.data;\n        console.log('Property data extracted:', propertyData);\n        \n        setProperty(propertyData);\n        \n        // Check if this specific property is favorited\n        checkIfFavorite();\n      } catch (err) {\n        console.error('Failed to load property details:', err);\n        alert('Failed to load property details.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProperty();\n  }, [id]);\n\n  // Check favorite status for THIS property only\n  const checkIfFavorite = async () => {\n    try {\n      const res = await api.get(`/favorites/check/${id}`);\n      setIsFavorite(res.data.isFavorite);\n    } catch (err) {\n      // Fallback: if endpoint doesn't exist, check from all favorites\n      try {\n        const res = await api.get('/traveler/favorites');\n        const favoriteIds = res.data.map(fav => fav.id);\n        setIsFavorite(favoriteIds.includes(parseInt(id)));\n      } catch (fallbackErr) {\n        console.error('Failed to check favorite status:', fallbackErr);\n      }\n    }\n  };\n\n  // Handle add/remove favorite\n  const handleToggleFavorite = async () => {\n    setFavoriteLoading(true);\n    try {\n      if (isFavorite) {\n        await api.delete(`/favorites/${id}`);\n        setIsFavorite(false);\n        alert('Removed from favorites!');\n      } else {\n        await api.post('/favorites', { propertyId: id });\n        setIsFavorite(true);\n        alert('Added to favorites!');\n      }\n    } catch (err) {\n      console.error('Failed to toggle favorite:', err);\n      alert('Failed to update favorites. Please try again.');\n    } finally {\n      setFavoriteLoading(false);\n    }\n  };\n\n  // Handle booking request\n  const handleBooking = async (e) => {\n    e.preventDefault();\n    \n    // Validate dates\n    if (new Date(endDate) <= new Date(startDate)) {\n      alert('End date must be after start date.');\n      return;\n    }\n\n    setBookingLoading(true);\n    try {\n      await api.post('/bookings/request', {\n        propertyId: id,\n        startDate,\n        endDate,\n        guests,\n      });\n      alert('Booking request submitted successfully!');\n      // Navigate to bookings page\n      navigate('/traveler/bookings');\n    } catch (err) {\n      console.error('Booking failed:', err);\n      alert('Booking failed. Please try again.');\n    } finally {\n      setBookingLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <main className=\"container mt-5\" role=\"main\" aria-busy=\"true\">\n        <div className=\"text-center\">\n          <div className=\"spinner-border\" role=\"status\">\n            <span className=\"visually-hidden\">Loading property...</span>\n          </div>\n          <p className=\"mt-2\">Loading property...</p>\n        </div>\n      </main>\n    );\n  }\n\n  if (!property) {\n    return (\n      <main className=\"container mt-5\" role=\"main\">\n        <div className=\"alert alert-warning\" role=\"alert\">\n          <h4 className=\"alert-heading\">Property not found</h4>\n          <p>The property you're looking for doesn't exist or has been removed.</p>\n        </div>\n      </main>\n    );\n  }\n\n  // Calculate total nights and price\n  const calculateTotal = () => {\n    if (startDate && endDate) {\n      const start = new Date(startDate);\n      const end = new Date(endDate);\n      const nights = Math.ceil((end - start) / (1000 * 60 * 60 * 24));\n      if (nights > 0) {\n        const pricePerNight = property.price || property.price_per_night;\n        return { nights, total: nights * pricePerNight };\n      }\n    }\n    return null;\n  };\n\n  const totalInfo = calculateTotal();\n\n  return (\n    <main className=\"container mt-5\" role=\"main\">\n      {/* Breadcrumb navigation */}\n      <nav aria-label=\"breadcrumb\">\n        <ol className=\"breadcrumb\">\n          <li className=\"breadcrumb-item\"><a href=\"/traveler/dashboard\">Search</a></li>\n          <li className=\"breadcrumb-item active\" aria-current=\"page\">{property.name || property.title}</li>\n        </ol>\n      </nav>\n\n      <div className=\"row\">\n        {/* Property Image */}\n        <div className=\"col-md-6 mb-4\">\n          <img\n            src={property.imageUrl || property.image_url || 'https://via.placeholder.com/600x400?text=Property+Image'}\n            alt={`${property.name || property.title} - ${property.type || 'Property'} in ${property.location || property.city || 'Location'}`}\n            className=\"img-fluid rounded shadow\"\n            style={{ width: '100%', height: '400px', objectFit: 'cover' }}\n          />\n        </div>\n\n        {/* Property Info */}\n        <div className=\"col-md-6\">\n          <div className=\"d-flex justify-content-between align-items-start mb-3\">\n            <div>\n              <h1 className=\"h2\">{property.name || property.title}</h1>\n              <p className=\"text-muted\">\n                <i className=\"bi bi-geo-alt-fill\"></i> {property.location || property.city}\n              </p>\n            </div>\n            \n            {/* Favorite Button */}\n            <button\n              className={`btn ${isFavorite ? 'btn-danger' : 'btn-outline-danger'}`}\n              onClick={handleToggleFavorite}\n              disabled={favoriteLoading}\n              style={{ minWidth: '140px' }}\n              aria-label={isFavorite ? 'Remove from favorites' : 'Add to favorites'}\n              aria-pressed={isFavorite}\n            >\n              {favoriteLoading ? (\n                <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n              ) : isFavorite ? (\n                <>❤️ Favorited</>\n              ) : (\n                <>🤍 Add to Favorites</>\n              )}\n            </button>\n          </div>\n\n          <p className=\"lead\">{property.description || 'No description available.'}</p>\n\n          {/* Property Details */}\n          <div className=\"card mb-4\">\n            <div className=\"card-body\">\n              <h2 className=\"h5 card-title\">Property Details</h2>\n              <dl className=\"row mb-0\">\n                <dt className=\"col-sm-4\">Type:</dt>\n                <dd className=\"col-sm-8\">{property.type || 'N/A'}</dd>\n                \n                <dt className=\"col-sm-4\">Bedrooms:</dt>\n                <dd className=\"col-sm-8\">{property.bedrooms || 'N/A'}</dd>\n                \n                <dt className=\"col-sm-4\">Bathrooms:</dt>\n                <dd className=\"col-sm-8\">{property.bathrooms || 'N/A'}</dd>\n                \n                <dt className=\"col-sm-4\">Max Guests:</dt>\n                <dd className=\"col-sm-8\">{property.maxGuests || property.max_guests || 'N/A'}</dd>\n                \n                {property.amenities && (\n                  <>\n                    <dt className=\"col-sm-4\">Amenities:</dt>\n                    <dd className=\"col-sm-8\">\n                      {(() => {\n                        try {\n                          if (typeof property.amenities === 'string') {\n                            const parsed = JSON.parse(property.amenities);\n                            return Array.isArray(parsed) ? parsed.join(', ') : property.amenities;\n                          } else if (Array.isArray(property.amenities)) {\n                            return property.amenities.join(', ');\n                          }\n                          return 'N/A';\n                        } catch (e) {\n                          return property.amenities;\n                        }\n                      })()}\n                    </dd>\n                  </>\n                )}\n              </dl>\n            </div>\n          </div>\n\n          <p className=\"h4 text-primary mb-3\">\n            <span className=\"visually-hidden\">Price:</span>\n            ${property.price || property.price_per_night || 0} per night\n          </p>\n        </div>\n      </div>\n\n      {/* Booking Form */}\n      <section className=\"mt-5\" aria-labelledby=\"booking-section\">\n        <div className=\"row justify-content-center\">\n          <div className=\"col-md-8\">\n            <div className=\"card shadow\">\n              <div className=\"card-body\">\n                <h2 id=\"booking-section\" className=\"h3 card-title mb-4\">Request Booking</h2>\n                <form onSubmit={handleBooking} aria-label=\"Property booking form\">\n                  <div className=\"row g-3\">\n                    <div className=\"col-md-4\">\n                      <label htmlFor=\"startDate\" className=\"form-label\">Check-in Date</label>\n                      <input\n                        type=\"date\"\n                        id=\"startDate\"\n                        className=\"form-control\"\n                        value={startDate}\n                        onChange={(e) => setStartDate(e.target.value)}\n                        min={new Date().toISOString().split('T')[0]}\n                        required\n                        aria-required=\"true\"\n                      />\n                    </div>\n                    <div className=\"col-md-4\">\n                      <label htmlFor=\"endDate\" className=\"form-label\">Check-out Date</label>\n                      <input\n                        type=\"date\"\n                        id=\"endDate\"\n                        className=\"form-control\"\n                        value={endDate}\n                        onChange={(e) => setEndDate(e.target.value)}\n                        min={startDate || new Date().toISOString().split('T')[0]}\n                        required\n                        aria-required=\"true\"\n                      />\n                    </div>\n                    <div className=\"col-md-4\">\n                      <label htmlFor=\"guests\" className=\"form-label\">Number of Guests</label>\n                      <input\n                        type=\"number\"\n                        id=\"guests\"\n                        className=\"form-control\"\n                        min=\"1\"\n                        max={property.maxGuests || property.max_guests || 10}\n                        value={guests}\n                        onChange={(e) => setGuests(e.target.value)}\n                        required\n                        aria-required=\"true\"\n                      />\n                    </div>\n                  </div>\n\n                  {/* Price Summary */}\n                  {totalInfo && (\n                    <div className=\"alert alert-info mt-3\" role=\"status\" aria-live=\"polite\">\n                      <strong>Price Summary:</strong><br />\n                      ${property.price || property.price_per_night} × {totalInfo.nights} {totalInfo.nights === 1 ? 'night' : 'nights'} = <strong>${totalInfo.total}</strong>\n                    </div>\n                  )}\n\n                  <div className=\"text-end mt-3\">\n                    <button \n                      type=\"submit\" \n                      className=\"btn btn-success btn-lg\"\n                      disabled={bookingLoading}\n                      aria-busy={bookingLoading}\n                    >\n                      {bookingLoading ? (\n                        <>\n                          <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\n                          Submitting...\n                        </>\n                      ) : (\n                        'Submit Booking Request'\n                      )}\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n      \n      {/* AI Agent Button */}\n      <AgentButton />\n    </main>\n  );\n}\n\nexport default PropertyDetails;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}