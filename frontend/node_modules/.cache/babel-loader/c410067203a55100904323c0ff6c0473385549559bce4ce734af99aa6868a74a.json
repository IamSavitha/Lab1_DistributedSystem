{"ast":null,"code":"var _jsxFileName = \"D:\\\\236\\\\lab1\\\\Lab1_DistributedSystem\\\\frontend\\\\src\\\\features\\\\traveler\\\\TravelerBookings.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport api from '../../services/api';\nimport AgentButton from '../../components/AgentButton';\n\n// Helper function to format date\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst formatDate = dateString => {\n  if (!dateString) return 'N/A';\n  try {\n    // Parse ISO date string and format as YYYY-MM-DD\n    const date = new Date(dateString);\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  } catch (error) {\n    // If date string is already in YYYY-MM-DD format, return as is\n    if (dateString.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n      return dateString;\n    }\n    return dateString;\n  }\n};\nfunction TravelerBookings() {\n  _s();\n  const [bookings, setBookings] = useState([]);\n  const [filteredBookings, setFilteredBookings] = useState([]);\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [cancellingId, setCancellingId] = useState(null);\n\n  // Fetch bookings on mount\n  useEffect(() => {\n    fetchBookings();\n  }, []);\n\n  // Filter bookings when status filter changes\n  useEffect(() => {\n    filterBookings();\n  }, [statusFilter, bookings]);\n  const fetchBookings = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      console.log('Fetching bookings from /bookings/traveler...');\n      const res = await api.get('/bookings/traveler');\n      console.log('Bookings response:', res.data);\n\n      // Handle different response formats\n      const bookingsList = res.data.bookings || res.data;\n      console.log('Bookings list:', bookingsList);\n\n      // Debug: log each booking status\n      if (Array.isArray(bookingsList)) {\n        bookingsList.forEach((booking, idx) => {\n          var _booking$property;\n          console.log(`Booking ${idx + 1}:`, {\n            id: booking.id,\n            status: booking.status,\n            property: ((_booking$property = booking.property) === null || _booking$property === void 0 ? void 0 : _booking$property.name) || booking.property_name,\n            startDate: booking.startDate || booking.start_date\n          });\n        });\n      }\n      setBookings(Array.isArray(bookingsList) ? bookingsList : []);\n    } catch (err) {\n      var _err$response, _err$response2;\n      console.error('Failed to load bookings:', err);\n      console.error('Error details:', (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data);\n      if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 404) {\n        setError('Bookings API not found. Please contact support.');\n      } else {\n        var _err$response3, _err$response3$data;\n        setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || 'Failed to load bookings.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Filter bookings based on status\n  const filterBookings = () => {\n    if (statusFilter === 'all') {\n      setFilteredBookings(bookings);\n    } else {\n      setFilteredBookings(bookings.filter(booking => {\n        var _booking$status;\n        return ((_booking$status = booking.status) === null || _booking$status === void 0 ? void 0 : _booking$status.toUpperCase()) === statusFilter.toUpperCase();\n      }));\n    }\n  };\n\n  // Handle cancel booking\n  const handleCancelBooking = async bookingId => {\n    if (!window.confirm('Are you sure you want to cancel this booking?')) {\n      return;\n    }\n    setCancellingId(bookingId);\n    try {\n      await api.put(`/bookings/${bookingId}/cancel`);\n\n      // Update booking status in local state\n      setBookings(bookings.map(booking => booking.id === bookingId ? {\n        ...booking,\n        status: 'CANCELLED'\n      } : booking));\n      alert('Booking cancelled successfully.');\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n      console.error('Failed to cancel booking:', err);\n      alert(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.error) || 'Failed to cancel booking. Please try again.');\n    } finally {\n      setCancellingId(null);\n    }\n  };\n\n  // Get count by status\n  const getStatusCount = status => {\n    if (status === 'all') return bookings.length;\n    return bookings.filter(b => {\n      var _b$status;\n      return ((_b$status = b.status) === null || _b$status === void 0 ? void 0 : _b$status.toUpperCase()) === status.toUpperCase();\n    }).length;\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mt-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner-border\",\n          role: \"status\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"visually-hidden\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2\",\n          children: \"Loading your bookings...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mt-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"alert-heading\",\n          children: \"Error Loading Bookings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: fetchBookings,\n            children: \"Try Again\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this), ' ', /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/traveler/dashboard\",\n            className: \"btn btn-secondary\",\n            children: \"Back to Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center mb-4\",\n      children: \"My Bookings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"nav nav-pills justify-content-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"nav-item\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `nav-link ${statusFilter === 'all' ? 'active' : ''}`,\n            onClick: () => setStatusFilter('all'),\n            children: [\"All (\", getStatusCount('all'), \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"nav-item\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `nav-link ${statusFilter === 'pending' ? 'active' : ''}`,\n            onClick: () => setStatusFilter('pending'),\n            children: [\"Pending (\", getStatusCount('pending'), \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"nav-item\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `nav-link ${statusFilter === 'accepted' ? 'active' : ''}`,\n            onClick: () => setStatusFilter('accepted'),\n            children: [\"Accepted (\", getStatusCount('accepted'), \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"nav-item\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `nav-link ${statusFilter === 'cancelled' ? 'active' : ''}`,\n            onClick: () => setStatusFilter('cancelled'),\n            children: [\"Cancelled (\", getStatusCount('cancelled'), \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), filteredBookings.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted mb-3\",\n        children: statusFilter === 'all' ? \"You have no bookings yet.\" : `You have no ${statusFilter} bookings.`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/traveler/dashboard\",\n        className: \"btn btn-primary\",\n        children: \"Explore Properties\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: filteredBookings.map(booking => {\n        var _booking$property2, _booking$property3, _booking$property4, _booking$property5, _booking$property6, _booking$property7, _booking$property8, _booking$property9, _booking$property0, _booking$status2, _booking$status3;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card shadow-sm h-100\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row g-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-4\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: ((_booking$property2 = booking.property) === null || _booking$property2 === void 0 ? void 0 : _booking$property2.imageUrl) || ((_booking$property3 = booking.property) === null || _booking$property3 === void 0 ? void 0 : _booking$property3.image_url) || 'https://placehold.co/200x200/e0e0e0/666666?text=Property',\n                  alt: `Image of ${((_booking$property4 = booking.property) === null || _booking$property4 === void 0 ? void 0 : _booking$property4.name) || ((_booking$property5 = booking.property) === null || _booking$property5 === void 0 ? void 0 : _booking$property5.title) || 'Property'}`,\n                  className: \"img-fluid rounded-start h-100\",\n                  style: {\n                    objectFit: 'cover'\n                  },\n                  onError: e => {\n                    // Fallback to a simple gray box if image fails to load\n                    e.target.src = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\"%3E%3Crect fill=\"%23e0e0e0\" width=\"200\" height=\"200\"/%3E%3Ctext fill=\"%23666666\" font-family=\"Arial\" font-size=\"16\" x=\"50%25\" y=\"50%25\" text-anchor=\"middle\" dy=\".3em\"%3ENo Image%3C/text%3E%3C/svg%3E';\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-8\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-body d-flex flex-column h-100\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"card-title\",\n                    children: ((_booking$property6 = booking.property) === null || _booking$property6 === void 0 ? void 0 : _booking$property6.name) || ((_booking$property7 = booking.property) === null || _booking$property7 === void 0 ? void 0 : _booking$property7.title) || booking.property_name || 'Property'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"card-text\",\n                    children: /*#__PURE__*/_jsxDEV(\"small\", {\n                      className: \"text-muted\",\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-geo-alt\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 245,\n                        columnNumber: 27\n                      }, this), \" \", ((_booking$property8 = booking.property) === null || _booking$property8 === void 0 ? void 0 : _booking$property8.location) || ((_booking$property9 = booking.property) === null || _booking$property9 === void 0 ? void 0 : _booking$property9.city) || booking.location || 'Location']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 244,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"card-text\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Check-in:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 249,\n                      columnNumber: 25\n                    }, this), \" \", formatDate(booking.startDate || booking.start_date), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 249,\n                      columnNumber: 105\n                    }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Check-out:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 250,\n                      columnNumber: 25\n                    }, this), \" \", formatDate(booking.endDate || booking.end_date)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"card-text\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Guests:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 253,\n                      columnNumber: 25\n                    }, this), \" \", booking.guests || 'N/A']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 23\n                  }, this), (booking.totalPrice || booking.total_price) && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"card-text\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Total:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 257,\n                      columnNumber: 27\n                    }, this), \" $\", booking.totalPrice || booking.total_price]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `badge bg-${getStatusColor(booking.status)}`,\n                      children: booking.status || 'UNKNOWN'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 263,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-auto\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(Link, {\n                        to: `/property/${((_booking$property0 = booking.property) === null || _booking$property0 === void 0 ? void 0 : _booking$property0.id) || booking.property_id}`,\n                        className: \"btn btn-sm btn-outline-primary flex-grow-1\",\n                        children: \"View Property\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 271,\n                        columnNumber: 27\n                      }, this), (((_booking$status2 = booking.status) === null || _booking$status2 === void 0 ? void 0 : _booking$status2.toUpperCase()) === 'PENDING' || ((_booking$status3 = booking.status) === null || _booking$status3 === void 0 ? void 0 : _booking$status3.toUpperCase()) === 'ACCEPTED') && /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-sm btn-outline-danger\",\n                        onClick: () => handleCancelBooking(booking.id),\n                        disabled: cancellingId === booking.id,\n                        children: cancellingId === booking.id ? /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"spinner-border spinner-border-sm\",\n                          role: \"status\",\n                          \"aria-hidden\": \"true\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 287,\n                          columnNumber: 33\n                        }, this) : 'Cancel'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 281,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this)\n        }, booking.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(AgentButton, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this);\n}\n\n// Helper to style status badge\n_s(TravelerBookings, \"oIsU7czbfRQ5M5VotxevcQkandA=\");\n_c = TravelerBookings;\nfunction getStatusColor(status) {\n  if (!status) return 'secondary';\n  switch (status.toUpperCase()) {\n    case 'ACCEPTED':\n    case 'CONFIRMED':\n      return 'success';\n    case 'PENDING':\n      return 'warning';\n    case 'CANCELLED':\n    case 'REJECTED':\n      return 'danger';\n    case 'COMPLETED':\n      return 'info';\n    default:\n      return 'secondary';\n  }\n}\nexport default TravelerBookings;\nvar _c;\n$RefreshReg$(_c, \"TravelerBookings\");","map":{"version":3,"names":["React","useEffect","useState","Link","api","AgentButton","jsxDEV","_jsxDEV","formatDate","dateString","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","error","match","TravelerBookings","_s","bookings","setBookings","filteredBookings","setFilteredBookings","statusFilter","setStatusFilter","loading","setLoading","setError","cancellingId","setCancellingId","fetchBookings","filterBookings","console","log","res","get","data","bookingsList","Array","isArray","forEach","booking","idx","_booking$property","id","status","property","name","property_name","startDate","start_date","err","_err$response","_err$response2","response","_err$response3","_err$response3$data","filter","_booking$status","toUpperCase","handleCancelBooking","bookingId","window","confirm","put","map","alert","_err$response4","_err$response4$data","getStatusCount","length","b","_b$status","className","children","role","fileName","_jsxFileName","lineNumber","columnNumber","onClick","to","_booking$property2","_booking$property3","_booking$property4","_booking$property5","_booking$property6","_booking$property7","_booking$property8","_booking$property9","_booking$property0","_booking$status2","_booking$status3","src","imageUrl","image_url","alt","title","style","objectFit","onError","e","target","location","city","endDate","end_date","guests","totalPrice","total_price","getStatusColor","property_id","disabled","_c","$RefreshReg$"],"sources":["D:/236/lab1/Lab1_DistributedSystem/frontend/src/features/traveler/TravelerBookings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport api from '../../services/api';\nimport AgentButton from '../../components/AgentButton';\n\n// Helper function to format date\nconst formatDate = (dateString) => {\n  if (!dateString) return 'N/A';\n  \n  try {\n    // Parse ISO date string and format as YYYY-MM-DD\n    const date = new Date(dateString);\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  } catch (error) {\n    // If date string is already in YYYY-MM-DD format, return as is\n    if (dateString.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n      return dateString;\n    }\n    return dateString;\n  }\n};\n\nfunction TravelerBookings() {\n  const [bookings, setBookings] = useState([]);\n  const [filteredBookings, setFilteredBookings] = useState([]);\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [cancellingId, setCancellingId] = useState(null);\n\n  // Fetch bookings on mount\n  useEffect(() => {\n    fetchBookings();\n  }, []);\n\n  // Filter bookings when status filter changes\n  useEffect(() => {\n    filterBookings();\n  }, [statusFilter, bookings]);\n\n  const fetchBookings = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      console.log('Fetching bookings from /bookings/traveler...');\n      const res = await api.get('/bookings/traveler');\n      console.log('Bookings response:', res.data);\n      \n      // Handle different response formats\n      const bookingsList = res.data.bookings || res.data;\n      console.log('Bookings list:', bookingsList);\n      \n      // Debug: log each booking status\n      if (Array.isArray(bookingsList)) {\n        bookingsList.forEach((booking, idx) => {\n          console.log(`Booking ${idx + 1}:`, {\n            id: booking.id,\n            status: booking.status,\n            property: booking.property?.name || booking.property_name,\n            startDate: booking.startDate || booking.start_date\n          });\n        });\n      }\n      \n      setBookings(Array.isArray(bookingsList) ? bookingsList : []);\n    } catch (err) {\n      console.error('Failed to load bookings:', err);\n      console.error('Error details:', err.response?.data);\n      \n      if (err.response?.status === 404) {\n        setError('Bookings API not found. Please contact support.');\n      } else {\n        setError(err.response?.data?.error || 'Failed to load bookings.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Filter bookings based on status\n  const filterBookings = () => {\n    if (statusFilter === 'all') {\n      setFilteredBookings(bookings);\n    } else {\n      setFilteredBookings(\n        bookings.filter(booking => \n          booking.status?.toUpperCase() === statusFilter.toUpperCase()\n        )\n      );\n    }\n  };\n\n  // Handle cancel booking\n  const handleCancelBooking = async (bookingId) => {\n    if (!window.confirm('Are you sure you want to cancel this booking?')) {\n      return;\n    }\n\n    setCancellingId(bookingId);\n    try {\n      await api.put(`/bookings/${bookingId}/cancel`);\n      \n      // Update booking status in local state\n      setBookings(bookings.map(booking => \n        booking.id === bookingId \n          ? { ...booking, status: 'CANCELLED' }\n          : booking\n      ));\n      \n      alert('Booking cancelled successfully.');\n    } catch (err) {\n      console.error('Failed to cancel booking:', err);\n      alert(err.response?.data?.error || 'Failed to cancel booking. Please try again.');\n    } finally {\n      setCancellingId(null);\n    }\n  };\n\n  // Get count by status\n  const getStatusCount = (status) => {\n    if (status === 'all') return bookings.length;\n    return bookings.filter(b => b.status?.toUpperCase() === status.toUpperCase()).length;\n  };\n\n  if (loading) {\n    return (\n      <main className=\"container mt-5\">\n        <div className=\"text-center\">\n          <div className=\"spinner-border\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </div>\n          <p className=\"mt-2\">Loading your bookings...</p>\n        </div>\n      </main>\n    );\n  }\n\n  if (error) {\n    return (\n      <main className=\"container mt-5\">\n        <div className=\"alert alert-danger\" role=\"alert\">\n          <h4 className=\"alert-heading\">Error Loading Bookings</h4>\n          <p>{error}</p>\n          <hr />\n          <p className=\"mb-0\">\n            <button className=\"btn btn-primary\" onClick={fetchBookings}>\n              Try Again\n            </button>\n            {' '}\n            <Link to=\"/traveler/dashboard\" className=\"btn btn-secondary\">\n              Back to Search\n            </Link>\n          </p>\n        </div>\n      </main>\n    );\n  }\n\n  return (\n    <main className=\"container mt-5\">\n      <h2 className=\"text-center mb-4\">My Bookings</h2>\n\n      {/* Status Filter Tabs */}\n      <div className=\"mb-4\">\n        <ul className=\"nav nav-pills justify-content-center\">\n          <li className=\"nav-item\">\n            <button\n              className={`nav-link ${statusFilter === 'all' ? 'active' : ''}`}\n              onClick={() => setStatusFilter('all')}\n            >\n              All ({getStatusCount('all')})\n            </button>\n          </li>\n          <li className=\"nav-item\">\n            <button\n              className={`nav-link ${statusFilter === 'pending' ? 'active' : ''}`}\n              onClick={() => setStatusFilter('pending')}\n            >\n              Pending ({getStatusCount('pending')})\n            </button>\n          </li>\n          <li className=\"nav-item\">\n            <button\n              className={`nav-link ${statusFilter === 'accepted' ? 'active' : ''}`}\n              onClick={() => setStatusFilter('accepted')}\n            >\n              Accepted ({getStatusCount('accepted')})\n            </button>\n          </li>\n          <li className=\"nav-item\">\n            <button\n              className={`nav-link ${statusFilter === 'cancelled' ? 'active' : ''}`}\n              onClick={() => setStatusFilter('cancelled')}\n            >\n              Cancelled ({getStatusCount('cancelled')})\n            </button>\n          </li>\n        </ul>\n      </div>\n\n      {/* Bookings List */}\n      {filteredBookings.length === 0 ? (\n        <div className=\"text-center py-5\">\n          <p className=\"text-muted mb-3\">\n            {statusFilter === 'all' \n              ? \"You have no bookings yet.\"\n              : `You have no ${statusFilter} bookings.`\n            }\n          </p>\n          <Link to=\"/traveler/dashboard\" className=\"btn btn-primary\">\n            Explore Properties\n          </Link>\n        </div>\n      ) : (\n        <div className=\"row\">\n          {filteredBookings.map((booking) => (\n            <div className=\"col-md-6 mb-4\" key={booking.id}>\n              <div className=\"card shadow-sm h-100\">\n                <div className=\"row g-0\">\n                  {/* Property Image */}\n                  <div className=\"col-md-4\">\n                    <img\n                      src={booking.property?.imageUrl || booking.property?.image_url || 'https://placehold.co/200x200/e0e0e0/666666?text=Property'}\n                      alt={`Image of ${booking.property?.name || booking.property?.title || 'Property'}`}\n                      className=\"img-fluid rounded-start h-100\"\n                      style={{ objectFit: 'cover' }}\n                      onError={(e) => {\n                        // Fallback to a simple gray box if image fails to load\n                        e.target.src = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\"%3E%3Crect fill=\"%23e0e0e0\" width=\"200\" height=\"200\"/%3E%3Ctext fill=\"%23666666\" font-family=\"Arial\" font-size=\"16\" x=\"50%25\" y=\"50%25\" text-anchor=\"middle\" dy=\".3em\"%3ENo Image%3C/text%3E%3C/svg%3E';\n                      }}\n                    />\n                  </div>\n                  \n                  {/* Booking Details */}\n                  <div className=\"col-md-8\">\n                    <div className=\"card-body d-flex flex-column h-100\">\n                      <h5 className=\"card-title\">\n                        {booking.property?.name || booking.property?.title || booking.property_name || 'Property'}\n                      </h5>\n                      <p className=\"card-text\">\n                        <small className=\"text-muted\">\n                          <i className=\"bi bi-geo-alt\"></i> {booking.property?.location || booking.property?.city || booking.location || 'Location'}\n                        </small>\n                      </p>\n                      <p className=\"card-text\">\n                        <strong>Check-in:</strong> {formatDate(booking.startDate || booking.start_date)}<br />\n                        <strong>Check-out:</strong> {formatDate(booking.endDate || booking.end_date)}\n                      </p>\n                      <p className=\"card-text\">\n                        <strong>Guests:</strong> {booking.guests || 'N/A'}\n                      </p>\n                      {(booking.totalPrice || booking.total_price) && (\n                        <p className=\"card-text\">\n                          <strong>Total:</strong> ${booking.totalPrice || booking.total_price}\n                        </p>\n                      )}\n                      \n                      {/* Status Badge */}\n                      <div className=\"mb-3\">\n                        <span className={`badge bg-${getStatusColor(booking.status)}`}>\n                          {booking.status || 'UNKNOWN'}\n                        </span>\n                      </div>\n\n                      {/* Action Buttons */}\n                      <div className=\"mt-auto\">\n                        <div className=\"d-flex gap-2\">\n                          <Link \n                            to={`/property/${booking.property?.id || booking.property_id}`}\n                            className=\"btn btn-sm btn-outline-primary flex-grow-1\"\n                          >\n                            View Property\n                          </Link>\n                          \n                          {/* Cancel Button - Only show for PENDING or ACCEPTED bookings */}\n                          {(booking.status?.toUpperCase() === 'PENDING' || \n                            booking.status?.toUpperCase() === 'ACCEPTED') && (\n                            <button\n                              className=\"btn btn-sm btn-outline-danger\"\n                              onClick={() => handleCancelBooking(booking.id)}\n                              disabled={cancellingId === booking.id}\n                            >\n                              {cancellingId === booking.id ? (\n                                <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                              ) : (\n                                'Cancel'\n                              )}\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n      <AgentButton />\n    </main>\n  );\n}\n\n// Helper to style status badge\nfunction getStatusColor(status) {\n  if (!status) return 'secondary';\n  \n  switch (status.toUpperCase()) {\n    case 'ACCEPTED':\n    case 'CONFIRMED':\n      return 'success';\n    case 'PENDING':\n      return 'warning';\n    case 'CANCELLED':\n    case 'REJECTED':\n      return 'danger';\n    case 'COMPLETED':\n      return 'info';\n    default:\n      return 'secondary';\n  }\n}\n\nexport default TravelerBookings;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}